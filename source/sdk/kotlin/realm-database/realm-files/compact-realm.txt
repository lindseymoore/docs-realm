.. _kotlin-compact-realm:

===================================
Reduce Realm File Size - Kotlin SDK
===================================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/compaction-introduction.rst

Automatic Compaction
--------------------

.. versionadded:: 1.6.0

.. include:: /includes/automatic-compaction.rst 


Manual Compaction Options
-------------------------

.. include:: /includes/manual-compaction.rst

Realm reduces the file size by writing a new (compact) version of the file, and 
then replacing the original with the newly-written file. Therefore, to compact, 
you must have free storage space equivalent to the original realm file size. 

You can configure realm to automatically compact the database each time a
realm is opened, or you can compact the file without first obtaining a
realm instance.???

Realm Configuration File
~~~~~~~~~~~~~~~~~~~~~~~~

You can configure Realm to check the realm file each time it is opened
by specifying a :js-sdk:`shouldCompact <Realm.html#~Configuration>` function
for the configuration. The following code example shows how to do this:

.. literalinclude:: /examples/kotlin/shared/src/commonTest/kotlin/com/mongodb/realm/realmkmmapp/Compacting.kt
   :language: kotlin

Realm.compactRealm() Method??????
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Alternatively, you can compact a realm file without first obtaining an instance 
of the realm by calling the :kotlin-sdk:`compactRealm() <Realm.html#compact>`
method:

.. literalinclude:: /examples/generated/node/compacting.snippet.compactNode.js
   :language: kotlin

The ``compactRealm()`` method will return true if the operation is successful.







